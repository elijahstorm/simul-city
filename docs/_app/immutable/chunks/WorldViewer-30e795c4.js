import{S as le,i as fe,s as ee,a2 as x,a3 as de,v as B,a as P,w as A,c as L,x as V,b as I,a4 as ge,f as w,t as b,y as D,h as R,D as ve,G as Se,H as ke,I as Be,a5 as H,a6 as tn,e as De,g as ze,d as Me,_ as nn,K as F,a7 as oe,A as te,T as Ge,k as Q,l as X,m as ne,n as ae,V as Je,J as Z,a8 as Qe,W as Dt,a0 as Rt,R as Ne,a9 as Xe,C as ie,U as gt,E as _t,aa as rn,ab as on,q as me,r as ce,u as sn}from"./index-4cb244a6.js";import{O as Ye,I as ln,D as pt,u as Ct,L as fn,G as $e,a as an,b as xe,c as $,d as un,e as se,i as mn,f as cn,o as dn,g as gn,h as _n,j as pn,P as wn,k as hn,l as wt,m as et,n as bn,p as Ie,r as ht,q as yn,B as We,s as vn,R as Ve,t as qe,C as tt,M as Ce,v as bt,w as _e,x as Sn,V as kn,y as Et,z as Re,A as Bn,E as je,F as An,H as Vn,J as Dn,W as Rn}from"./index-16375286.js";import{b as It}from"./paths-0808d32b.js";import{E as Cn}from"./Engine-ea4aba73.js";function En(r){let e;const n=r[16].default,t=ve(n,r,r[27],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o&134217728)&&Se(t,n,i,i[27],e?Be(n,i[27],o,null):ke(i[27]),null)},i(i){e||(w(t,i),e=!0)},o(i){b(t,i),e=!1},d(i){t&&t.d(i)}}}function In(r){let e,n,t,i,o;function f(s){r[17](s)}let c={object:r[1],lookAt:r[5],position:r[2],scale:r[3],rotation:r[4],castShadow:r[7],receiveShadow:r[8],frustumCulled:r[9],renderOrder:r[10],visible:r[11],userData:r[12],dispose:r[13],viewportAware:r[6],$$slots:{default:[En]},$$scope:{ctx:r}};return r[0]!==void 0&&(c.inViewport=r[0]),e=new Ye({props:c}),x.push(()=>de(e,"inViewport",f)),e.$on("viewportenter",r[18]),e.$on("viewportleave",r[19]),i=new ln({props:{object:r[1],interactive:r[14],ignorePointer:r[15]}}),i.$on("click",r[20]),i.$on("contextmenu",r[21]),i.$on("pointerup",r[22]),i.$on("pointerdown",r[23]),i.$on("pointerenter",r[24]),i.$on("pointerleave",r[25]),i.$on("pointermove",r[26]),{c(){B(e.$$.fragment),t=P(),B(i.$$.fragment)},l(s){A(e.$$.fragment,s),t=L(s),A(i.$$.fragment,s)},m(s,a){V(e,s,a),I(s,t,a),V(i,s,a),o=!0},p(s,[a]){const l={};a&2&&(l.object=s[1]),a&32&&(l.lookAt=s[5]),a&4&&(l.position=s[2]),a&8&&(l.scale=s[3]),a&16&&(l.rotation=s[4]),a&128&&(l.castShadow=s[7]),a&256&&(l.receiveShadow=s[8]),a&512&&(l.frustumCulled=s[9]),a&1024&&(l.renderOrder=s[10]),a&2048&&(l.visible=s[11]),a&4096&&(l.userData=s[12]),a&8192&&(l.dispose=s[13]),a&64&&(l.viewportAware=s[6]),a&134217728&&(l.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,l.inViewport=s[0],ge(()=>n=!1)),e.$set(l);const g={};a&2&&(g.object=s[1]),a&16384&&(g.interactive=s[14]),a&32768&&(g.ignorePointer=s[15]),i.$set(g)},i(s){o||(w(e.$$.fragment,s),w(i.$$.fragment,s),o=!0)},o(s){b(e.$$.fragment,s),b(i.$$.fragment,s),o=!1},d(s){D(e,s),s&&R(t),D(i,s)}}}function zn(r,e,n){let{$$slots:t={},$$scope:i}=e,{line:o}=e,{position:f=void 0}=e,{scale:c=void 0}=e,{rotation:s=void 0}=e,{lookAt:a=void 0}=e,{viewportAware:l=!1}=e,{inViewport:g=!1}=e,{castShadow:S=void 0}=e,{receiveShadow:h=void 0}=e,{frustumCulled:m=void 0}=e,{renderOrder:u=void 0}=e,{visible:p=void 0}=e,{userData:E=void 0}=e,{dispose:z=void 0}=e,{interactive:O=!1}=e,{ignorePointer:M=!1}=e;function j(v){g=v,n(0,g)}function _(v){H.call(this,r,v)}function y(v){H.call(this,r,v)}function T(v){H.call(this,r,v)}function N(v){H.call(this,r,v)}function K(v){H.call(this,r,v)}function C(v){H.call(this,r,v)}function U(v){H.call(this,r,v)}function q(v){H.call(this,r,v)}function Y(v){H.call(this,r,v)}return r.$$set=v=>{"line"in v&&n(1,o=v.line),"position"in v&&n(2,f=v.position),"scale"in v&&n(3,c=v.scale),"rotation"in v&&n(4,s=v.rotation),"lookAt"in v&&n(5,a=v.lookAt),"viewportAware"in v&&n(6,l=v.viewportAware),"inViewport"in v&&n(0,g=v.inViewport),"castShadow"in v&&n(7,S=v.castShadow),"receiveShadow"in v&&n(8,h=v.receiveShadow),"frustumCulled"in v&&n(9,m=v.frustumCulled),"renderOrder"in v&&n(10,u=v.renderOrder),"visible"in v&&n(11,p=v.visible),"userData"in v&&n(12,E=v.userData),"dispose"in v&&n(13,z=v.dispose),"interactive"in v&&n(14,O=v.interactive),"ignorePointer"in v&&n(15,M=v.ignorePointer),"$$scope"in v&&n(27,i=v.$$scope)},[g,o,f,c,s,a,l,S,h,m,u,p,E,z,O,M,t,j,_,y,T,N,K,C,U,q,Y,i]}class Mn extends le{constructor(e){super(),fe(this,e,zn,In,ee,{line:1,position:2,scale:3,rotation:4,lookAt:5,viewportAware:6,inViewport:0,castShadow:7,receiveShadow:8,frustumCulled:9,renderOrder:10,visible:11,userData:12,dispose:13,interactive:14,ignorePointer:15})}}function jn(r){let e;const n=r[20].default,t=ve(n,r,r[31],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o[1]&1)&&Se(t,n,i,i[31],e?Be(n,i[31],o,null):ke(i[31]),null)},i(i){e||(w(t,i),e=!0)},o(i){b(t,i),e=!1},d(i){t&&t.d(i)}}}function On(r){let e,n,t,i,o,f,c;e=new pt({props:{dispose:r[11],object:r[15]}}),t=new pt({props:{dispose:r[11],object:r[16]}});function s(l){r[21](l)}let a={line:r[17],position:r[1],scale:r[2],rotation:r[3],lookAt:r[14],castShadow:r[5],receiveShadow:r[6],frustumCulled:r[7],renderOrder:r[8],visible:r[9],userData:r[10],dispose:r[11],interactive:r[12],ignorePointer:r[13],viewportAware:r[4],$$slots:{default:[jn]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.inViewport=r[0]),o=new Mn({props:a}),x.push(()=>de(o,"inViewport",s)),o.$on("click",r[22]),o.$on("contextmenu",r[23]),o.$on("pointerup",r[24]),o.$on("pointerdown",r[25]),o.$on("pointerenter",r[26]),o.$on("pointerleave",r[27]),o.$on("pointermove",r[28]),o.$on("viewportenter",r[29]),o.$on("viewportleave",r[30]),{c(){B(e.$$.fragment),n=P(),B(t.$$.fragment),i=P(),B(o.$$.fragment)},l(l){A(e.$$.fragment,l),n=L(l),A(t.$$.fragment,l),i=L(l),A(o.$$.fragment,l)},m(l,g){V(e,l,g),I(l,n,g),V(t,l,g),I(l,i,g),V(o,l,g),c=!0},p(l,g){const S={};g[0]&2048&&(S.dispose=l[11]),g[0]&32768&&(S.object=l[15]),e.$set(S);const h={};g[0]&2048&&(h.dispose=l[11]),g[0]&65536&&(h.object=l[16]),t.$set(h);const m={};g[0]&2&&(m.position=l[1]),g[0]&4&&(m.scale=l[2]),g[0]&8&&(m.rotation=l[3]),g[0]&16384&&(m.lookAt=l[14]),g[0]&32&&(m.castShadow=l[5]),g[0]&64&&(m.receiveShadow=l[6]),g[0]&128&&(m.frustumCulled=l[7]),g[0]&256&&(m.renderOrder=l[8]),g[0]&512&&(m.visible=l[9]),g[0]&1024&&(m.userData=l[10]),g[0]&2048&&(m.dispose=l[11]),g[0]&4096&&(m.interactive=l[12]),g[0]&8192&&(m.ignorePointer=l[13]),g[0]&16&&(m.viewportAware=l[4]),g[1]&1&&(m.$$scope={dirty:g,ctx:l}),!f&&g[0]&1&&(f=!0,m.inViewport=l[0],ge(()=>f=!1)),o.$set(m)},i(l){c||(w(e.$$.fragment,l),w(t.$$.fragment,l),w(o.$$.fragment,l),c=!0)},o(l){b(e.$$.fragment,l),b(t.$$.fragment,l),b(o.$$.fragment,l),c=!1},d(l){D(e,l),l&&R(n),D(t,l),l&&R(i),D(o,l)}}}function Pn(r,e,n){let{$$slots:t={},$$scope:i}=e,{position:o=void 0}=e,{scale:f=void 0}=e,{rotation:c=void 0}=e,{viewportAware:s=!1}=e,{inViewport:a=!1}=e,{castShadow:l=void 0}=e,{receiveShadow:g=void 0}=e,{frustumCulled:S=void 0}=e,{renderOrder:h=void 0}=e,{visible:m=void 0}=e,{userData:u=void 0}=e,{dispose:p=void 0}=e,{interactive:E=!1}=e,{ignorePointer:z=!1}=e,{lookAt:O=void 0}=e,{geometry:M}=e,{material:j}=e,_=j,y=M;const{invalidate:T}=Ct(),N=new fn(M,j),K=()=>N;function C(k){a=k,n(0,a)}function U(k){H.call(this,r,k)}function q(k){H.call(this,r,k)}function Y(k){H.call(this,r,k)}function v(k){H.call(this,r,k)}function re(k){H.call(this,r,k)}function Ae(k){H.call(this,r,k)}function W(k){H.call(this,r,k)}function pe(k){H.call(this,r,k)}function we(k){H.call(this,r,k)}return r.$$set=k=>{"position"in k&&n(1,o=k.position),"scale"in k&&n(2,f=k.scale),"rotation"in k&&n(3,c=k.rotation),"viewportAware"in k&&n(4,s=k.viewportAware),"inViewport"in k&&n(0,a=k.inViewport),"castShadow"in k&&n(5,l=k.castShadow),"receiveShadow"in k&&n(6,g=k.receiveShadow),"frustumCulled"in k&&n(7,S=k.frustumCulled),"renderOrder"in k&&n(8,h=k.renderOrder),"visible"in k&&n(9,m=k.visible),"userData"in k&&n(10,u=k.userData),"dispose"in k&&n(11,p=k.dispose),"interactive"in k&&n(12,E=k.interactive),"ignorePointer"in k&&n(13,z=k.ignorePointer),"lookAt"in k&&n(14,O=k.lookAt),"geometry"in k&&n(15,M=k.geometry),"material"in k&&n(16,j=k.material),"$$scope"in k&&n(31,i=k.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&327680&&(j!==_?(K().material=j,T("LineSegments: material changed")):T("LineSegments: material props changed"),n(18,_=j)),r.$$.dirty[0]&557056&&(M!==y?(K().geometry=M,T("LineSegments: geometry changed")):T("LineSegments: geometry props changed"),n(19,y=M))},[a,o,f,c,s,l,g,S,h,m,u,p,E,z,O,M,j,N,_,y,t,C,U,q,Y,v,re,Ae,W,pe,we,i]}class Ln extends le{constructor(e){super(),fe(this,e,Pn,On,ee,{position:1,scale:2,rotation:3,viewportAware:4,inViewport:0,castShadow:5,receiveShadow:6,frustumCulled:7,renderOrder:8,visible:9,userData:10,dispose:11,interactive:12,ignorePointer:13,lookAt:14,geometry:15,material:16,lineSegments:17},null,[-1,-1])}get lineSegments(){return this.$$.ctx[17]}}const Tn=()=>{const r=tn();return{hasEventListeners:n=>{const t=r.$$.callbacks;return n in t&&t[n].length>0}}},Fn=r=>({}),yt=r=>({});function Wn(r){let e;const n=r[44].threlte,t=ve(n,r,r[53],yt);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o[1]&4194304)&&Se(t,n,i,i[53],e?Be(n,i[53],o,Fn):ke(i[53]),yt)},i(i){e||(w(t,i),e=!0)},o(i){b(t,i),e=!1},d(i){t&&t.d(i)}}}function Hn(r){let e=r[8],n,t,i=r[8]&&Ke(r);return{c(){i&&i.c(),n=De()},l(o){i&&i.l(o),n=De()},m(o,f){i&&i.m(o,f),I(o,n,f),t=!0},p(o,f){o[8]?e?ee(e,o[8])?(i.d(1),i=Ke(o),i.c(),i.m(n.parentNode,n)):i.p(o,f):(i=Ke(o),i.c(),i.m(n.parentNode,n)):e&&(i.d(1),i=null),e=o[8]},i(o){t||(w(i),t=!0)},o(o){b(i),t=!1},d(o){o&&R(n),i&&i.d(o)}}}function Gn(r){let e=r[8],n,t,i=r[8]&&Ze(r);return{c(){i&&i.c(),n=De()},l(o){i&&i.l(o),n=De()},m(o,f){i&&i.m(o,f),I(o,n,f),t=!0},p(o,f){o[8]?e?ee(e,o[8])?(i.d(1),i=Ze(o),i.c(),i.m(n.parentNode,n)):i.p(o,f):(i=Ze(o),i.c(),i.m(n.parentNode,n)):e&&(i.d(1),i=null),e=o[8]},i(o){t||(w(i),t=!0)},o(o){b(i),t=!1},d(o){o&&R(n),i&&i.d(o)}}}function vt(r){let e;const n=r[44].default,t=ve(n,r,r[53],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o[1]&4194304)&&Se(t,n,i,i[53],e?Be(n,i[53],o,null):ke(i[53]),null)},i(i){e||(w(t,i),e=!0)},o(i){b(t,i),e=!1},d(i){t&&t.d(i)}}}function Ke(r){let e,n,t,i,o,f,c,s=r[13]&&vt(r),a=[{style:i=se(r[17])}],l={};for(let g=0;g<a.length;g+=1)l=Ge(l,a[g]);return{c(){e=Q(r[8]),n=Q("div"),s&&s.c(),this.h()},l(g){e=X(g,(r[8]||"null").toUpperCase(),{style:!0});var S=ne(e);n=X(S,"DIV",{style:!0});var h=ne(n);s&&s.l(h),h.forEach(R),S.forEach(R),this.h()},h(){ae(n,"style",t=se(r[18])),Je(e,l)},m(g,S){I(g,e,S),Z(e,n),s&&s.m(n,null),r[52](e),o=!0,f||(c=[Qe(r[29].call(null,e)),Qe(r[28].call(null,e))],f=!0)},p(g,S){g[13]?s?(s.p(g,S),S[0]&8192&&w(s,1)):(s=vt(g),s.c(),w(s,1),s.m(n,null)):s&&(ze(),b(s,1,1,()=>{s=null}),Me()),(!o||S[0]&262144&&t!==(t=se(g[18])))&&ae(n,"style",t),Je(e,l=Dt(a,[(!o||S[0]&131072&&i!==(i=se(g[17])))&&{style:i}]))},i(g){o||(w(s),o=!0)},o(g){b(s),o=!1},d(g){g&&R(e),s&&s.d(),r[52](null),f=!1,Rt(c)}}}function St(r){let e;const n=r[44].default,t=ve(n,r,r[53],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o[1]&4194304)&&Se(t,n,i,i[53],e?Be(n,i[53],o,null):ke(i[53]),null)},i(i){e||(w(t,i),e=!0)},o(i){b(t,i),e=!1},d(i){t&&t.d(i)}}}function Ze(r){let e,n,t,i,o,f,c,s,a,l=r[13]&&St(r),g=[{style:f=se(r[14])}],S={};for(let h=0;h<g.length;h+=1)S=Ge(S,g[h]);return{c(){e=Q(r[8]),n=Q("div"),t=Q("div"),l&&l.c(),this.h()},l(h){e=X(h,(r[8]||"null").toUpperCase(),{style:!0});var m=ne(e);n=X(m,"DIV",{style:!0});var u=ne(n);t=X(u,"DIV",{style:!0});var p=ne(t);l&&l.l(p),p.forEach(R),u.forEach(R),m.forEach(R),this.h()},h(){ae(t,"style",i=se(r[16])),ae(n,"style",o=se(r[15])),Je(e,S)},m(h,m){I(h,e,m),Z(e,n),Z(n,t),l&&l.m(t,null),r[49](t),r[50](n),r[51](e),c=!0,s||(a=Qe(r[29].call(null,e)),s=!0)},p(h,m){h[13]?l?(l.p(h,m),m[0]&8192&&w(l,1)):(l=St(h),l.c(),w(l,1),l.m(t,null)):l&&(ze(),b(l,1,1,()=>{l=null}),Me()),(!c||m[0]&65536&&i!==(i=se(h[16])))&&ae(t,"style",i),(!c||m[0]&32768&&o!==(o=se(h[15])))&&ae(n,"style",o),Je(e,S=Dt(g,[(!c||m[0]&16384&&f!==(f=se(h[14])))&&{style:f}]))},i(h){c||(w(l),c=!0)},o(h){b(l),c=!1},d(h){h&&R(e),l&&l.d(),r[49](null),r[50](null),r[51](null),s=!1,a()}}}function Jn(r){let e,n,t,i,o,f,c,s;function a(u){r[45](u)}function l(u){r[46](u)}let g={position:r[1],scale:r[2],rotation:r[3],lookAt:r[4],viewportAware:r[5],dispose:r[6],$$slots:{default:[Wn]},$$scope:{ctx:r}};r[9]!==void 0&&(g.group=r[9]),r[0]!==void 0&&(g.inViewport=r[0]),e=new $e({props:g}),x.push(()=>de(e,"group",a)),x.push(()=>de(e,"inViewport",l)),e.$on("viewportenter",r[47]),e.$on("viewportleave",r[48]);const S=[Gn,Hn],h=[];function m(u,p){return u[7]?0:1}return o=m(r),f=h[o]=S[o](r),{c(){B(e.$$.fragment),i=P(),f.c(),c=De()},l(u){A(e.$$.fragment,u),i=L(u),f.l(u),c=De()},m(u,p){V(e,u,p),I(u,i,p),h[o].m(u,p),I(u,c,p),s=!0},p(u,p){const E={};p[0]&2&&(E.position=u[1]),p[0]&4&&(E.scale=u[2]),p[0]&8&&(E.rotation=u[3]),p[0]&16&&(E.lookAt=u[4]),p[0]&32&&(E.viewportAware=u[5]),p[0]&64&&(E.dispose=u[6]),p[1]&4194304&&(E.$$scope={dirty:p,ctx:u}),!n&&p[0]&512&&(n=!0,E.group=u[9],ge(()=>n=!1)),!t&&p[0]&1&&(t=!0,E.inViewport=u[0],ge(()=>t=!1)),e.$set(E);let z=o;o=m(u),o===z?h[o].p(u,p):(ze(),b(h[z],1,1,()=>{h[z]=null}),Me(),f=h[o],f?f.p(u,p):(f=h[o]=S[o](u),f.c()),w(f,1),f.m(c.parentNode,c))},i(u){s||(w(e.$$.fragment,u),w(f),s=!0)},o(u){b(e.$$.fragment,u),b(f),s=!1},d(u){D(e,u),u&&R(i),h[o].d(u),u&&R(c)}}}function Nn(r,e,n){let t,i,o,f,c,s,a,l,g,{$$slots:S={},$$scope:h}=e,{position:m=void 0}=e,{scale:u=void 0}=e,{rotation:p=void 0}=e,{lookAt:E=void 0}=e,{viewportAware:z=!1}=e,{inViewport:O=!1}=e,{dispose:M=!1}=e,{transform:j=!1}=e,{calculatePosition:_=un}=e,{eps:y=.001}=e,{occlude:T=!1}=e,{zIndexRange:N=[16777271,0]}=e,{sprite:K=!1}=e,{pointerEvents:C="auto"}=e,{center:U=!1}=e,{fullscreen:q=!1}=e,{distanceFactor:Y=void 0}=e,{as:v="div"}=e,{portal:re=void 0}=e;const Ae=nn();let W;const{renderer:pe,camera:we,scene:k,size:Pe}=Ct();F(r,we,d=>n(57,i=d)),F(r,Pe,d=>n(41,t=d));const Ot=()=>{if(!(i instanceof wn)&&!(i instanceof hn))throw new Error("Only PerspectiveCamera or OrthographicCamera supported for component <HTML>");return i},{raycaster:Pt}=an();let Le=[0,0],nt=0,{visible:ue=!0}=e,Ee=document.createElement(v),Te,Fe;const{hasEventListeners:Lt}=Tn();let Ue=typeof T=="boolean"&&T===!0?[k]:Array.isArray(T)?T:void 0;const it=oe(Pe,d=>d.width/2);F(r,it,d=>n(43,f=d));const rt=oe(Pe,d=>d.height/2);F(r,rt,d=>n(42,o=d));let J={common:{el:te({})},transform:{el:te({position:"absolute",top:"0",left:"0",pointerEvents:"none",overflow:"hidden",display:"block",width:`${t.width}px`,height:`${t.height}px`}),outerRef:te({position:"absolute",top:"0",left:"0",width:`${t.width}px`,height:`${t.height}px`,transformStyle:"preserve-3d",pointerEvents:"none"}),innerRef:te({position:"absolute",pointerEvents:C})},noTransform:{el:te({}),div:te({position:"absolute",transform:U?"translate3d(-50%,-50%,0)":"none",top:q?`${-o}px`:void 0,left:q?`${-f}px`:void 0,width:q?`${t.width}px`:void 0,height:q?`${t.height}px`:void 0})}};const ot=oe([J.transform.el,J.common.el],([d,G])=>({...d,...G}));F(r,ot,d=>n(14,c=d));const st=oe(J.transform.outerRef,d=>d);F(r,st,d=>n(15,s=d));const lt=oe(J.transform.innerRef,d=>d);F(r,lt,d=>n(16,a=d));const ft=oe(J.noTransform.el,d=>d);F(r,ft,d=>n(17,l=d));const at=oe(J.noTransform.div,d=>d);F(r,at,d=>n(18,g=d));const ut=()=>{if(!W)return!0;let d=!0,G=W.parent;e:for(;G;){if("visible"in G&&!G.visible){d=!1;break e}G=G.parent}return d};let mt=ut();xe(async()=>{if(!W)return;n(13,mt=ut());const d=Ot();d.updateMatrixWorld(),W.updateWorldMatrix(!0,!1);const G=j?Le:_(W,d,t);if(j||Math.abs(nt-d.zoom)>y||Math.abs(Le[0]-G[0])>y||Math.abs(Le[1]-G[1])>y){const ct=mn(W,d),Zt=ue;if(Ue){const he=cn(W,d,Pt,Ue);n(30,ue=he&&!ct)}else n(30,ue=!ct);if(Zt!==ue&&(Lt("visibilitychange")?Ae("visibilitychange",ue):$(J.common.el,{display:ue?"block":"none"})),$(J.common.el,{zIndex:`${dn(W,d,N)}`}),j){const he=d.projectionMatrix.elements[5]*o,{isOrthographicCamera:dt,top:Qt,left:Xt,bottom:Yt,right:$t}=d;let be=W.matrixWorld;if(K&&(be=d.matrixWorldInverse.clone().transpose().copyPosition(be).scale(W.scale),be.elements[3]=be.elements[7]=be.elements[11]=0,be.elements[15]=1),$(J.transform.el,{perspective:dt?"":`${he}px`}),Te&&Fe){const xt=dt?`scale(${he}) translate(${wt(-($t+Xt)/2)}px,${wt((Qt+Yt)/2)}px)`:`translateZ(${he}px)`,en=gn(d.matrixWorldInverse);$(J.transform.outerRef,{transform:`${xt}${en}translate(${f}px, ${o}px)`}),$(J.transform.innerRef,{transform:_n(be,1/((Y||10)/400))})}}else{const he=Y===void 0?1:pn(W,d)*Y;$(J.noTransform.el,{transform:`translate3d(${G[0]}px, ${G[1]}px, 0) scale(${he})`})}Le=G,nt=d.zoom}},{debugFrameloopMessage:"HTML: tracking parent"});const Tt=d=>{if(!W||j)return;k.updateMatrixWorld();const G=_(W,i,t);$(J.noTransform.el,{position:"absolute",top:"0",left:"0",transform:`translate3d(${G[0]}px, ${G[1]}px, 0)`,transformOrigin:"0 0"})},Ft=d=>{if(!pe){console.warn("HTML: renderer is undefined. Is this component a child to <Canvas>?");return}const G=re!=null?re:pe.domElement.parentElement;if(!G){console.warn("HTML: target is undefined.");return}return G.appendChild(d),{destroy:()=>{!d.parentNode||d.parentNode.removeChild(d)}}};function Wt(d){W=d,n(9,W)}function Ht(d){O=d,n(0,O)}function Gt(d){H.call(this,r,d)}function Jt(d){H.call(this,r,d)}function Nt(d){x[d?"unshift":"push"](()=>{Fe=d,n(12,Fe)})}function Ut(d){x[d?"unshift":"push"](()=>{Te=d,n(11,Te)})}function qt(d){x[d?"unshift":"push"](()=>{Ee=d,n(10,Ee)})}function Kt(d){x[d?"unshift":"push"](()=>{Ee=d,n(10,Ee)})}return r.$$set=d=>{"position"in d&&n(1,m=d.position),"scale"in d&&n(2,u=d.scale),"rotation"in d&&n(3,p=d.rotation),"lookAt"in d&&n(4,E=d.lookAt),"viewportAware"in d&&n(5,z=d.viewportAware),"inViewport"in d&&n(0,O=d.inViewport),"dispose"in d&&n(6,M=d.dispose),"transform"in d&&n(7,j=d.transform),"calculatePosition"in d&&n(31,_=d.calculatePosition),"eps"in d&&n(32,y=d.eps),"occlude"in d&&n(33,T=d.occlude),"zIndexRange"in d&&n(34,N=d.zIndexRange),"sprite"in d&&n(35,K=d.sprite),"pointerEvents"in d&&n(36,C=d.pointerEvents),"center"in d&&n(37,U=d.center),"fullscreen"in d&&n(38,q=d.fullscreen),"distanceFactor"in d&&n(39,Y=d.distanceFactor),"as"in d&&n(8,v=d.as),"portal"in d&&n(40,re=d.portal),"visible"in d&&n(30,ue=d.visible),"$$scope"in d&&n(53,h=d.$$scope)},r.$$.update=()=>{r.$$.dirty[1]&4&&(Ue=typeof T=="boolean"&&T===!0?[k]:Array.isArray(T)?T:void 0),r.$$.dirty[1]&1024&&$(J.transform.el,{width:`${t.width}px`,height:`${t.height}px`}),r.$$.dirty[1]&1024&&$(J.transform.outerRef,{width:`${t.width}px`,height:`${t.height}px`}),r.$$.dirty[1]&32&&$(J.transform.innerRef,{pointerEvents:C}),r.$$.dirty[1]&64&&$(J.noTransform.div,{transform:U?"translate3d(-50%, -50%, 0)":"none"}),r.$$.dirty[1]&7296&&$(J.noTransform.div,{top:q?`${-o}px`:void 0,left:q?`${-f}px`:void 0,width:q?`${t.width}px`:void 0,height:q?`${t.height}px`:void 0})},[O,m,u,p,E,z,M,j,v,W,Ee,Te,Fe,mt,c,s,a,l,g,we,Pe,it,rt,ot,st,lt,ft,at,Tt,Ft,ue,_,y,T,N,K,C,U,q,Y,re,t,o,f,S,Wt,Ht,Gt,Jt,Nt,Ut,qt,Kt,h]}class Oe extends le{constructor(e){super(),fe(this,e,Nn,Jn,ee,{position:1,scale:2,rotation:3,lookAt:4,viewportAware:5,inViewport:0,dispose:6,transform:7,calculatePosition:31,eps:32,occlude:33,zIndexRange:34,sprite:35,pointerEvents:36,center:37,fullscreen:38,distanceFactor:39,as:8,portal:40,visible:30},null,[-1,-1,-1])}}const zt=r=>{const e=te(void 0),n=te(void 0),t=et(),i=oe([e,n],([c,s])=>{if(!!c&&!!s)return[c,s]}),o=te(void 0),f=i.subscribe(c=>{c&&o.set(r(...c,t))});return Ne(()=>{f();const c=Xe(o);!c||(c instanceof bn?t.world.removeMultibodyJoint(c,!0):t.world.removeImpulseJoint(c,!0))}),{joint:o,rigidBodyA:e,rigidBodyB:n}},Mt=(r,e,n,t)=>zt((i,o,{world:f,rapier:c})=>{const s=c.JointData.revolute(Ie(r),Ie(e),Ie(n).normalize());return t&&(s.limitsEnabled=!0,s.limits=t),f.createImpulseJoint(s,i,o,!0)}),Un=(r,e,n,t)=>zt((i,o,{world:f,rapier:c})=>{const s=c.JointData.fixed(Ie(r),ht(e),Ie(n),ht(t));return f.createImpulseJoint(s,i,o,!0)});function qn(r){let e,n;return e=new Ln({props:{renderOrder:1/0,geometry:r[1],material:r[0]}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p:ie,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Kn(r,e,n){let{vertexColors:t=!0}=e;const i=new yn({vertexColors:t,...e}),{world:o}=et(),f=o.debugRender(),c=new We(f.vertices,3),s=new We(f.colors,4),a=new vn;return a.setAttribute("position",c),a.setAttribute("color",s),xe(()=>{const l=o.debugRender(),g=new We(l.vertices,3),S=new We(l.colors,4);a.setAttribute("position",g),a.setAttribute("color",S)}),Ne(()=>{a.dispose(),i.dispose()}),r.$$set=l=>{n(7,e=Ge(Ge({},e),gt(l))),"vertexColors"in l&&n(2,t=l.vertexColors)},e=gt(e),[i,a,t]}class Zn extends le{constructor(e){super(),fe(this,e,Kn,qn,ee,{vertexColors:2})}}const ye=Math.PI/180;function kt(r,e,n){return Math.max(e,Math.min(n,r))}function Bt(r,e,n,t,i){return t+(r-e)*(i-t)/(n-e)}const jt=()=>{const r=te({w:!1,a:!1,s:!1,d:!1}),e=i=>{!Object.keys(Xe(r)).includes(i.key)||r.update(o=>(o[i.key]=!0,o))},n=i=>{!Object.keys(Xe(r)).includes(i.key)||r.update(o=>(o[i.key]=!1,o))},t=oe(r,i=>({x:0+(i.d?1:0)-(i.a?1:0),y:0+(i.w?1:0)-(i.s?1:0)}));return window.addEventListener("keydown",e),window.addEventListener("keyup",n),Ne(()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",n)}),t};function Qn(r){var s,a;let e,n,t,i,o;function f(l){r[16](l)}let c={mass:1,friction:1.5,shape:"cylinder",args:[.12,.3],rotation:{x:90*ye}};return r[3]!==void 0&&(c.collider=r[3]),e=new tt({props:c}),x.push(()=>de(e,"collider",f)),i=new Ce({props:{castShadow:!0,geometry:(s=r[1])!=null?s:new bt(.3,.3,.24),material:(a=r[2])!=null?a:new _e}}),{c(){B(e.$$.fragment),t=P(),B(i.$$.fragment)},l(l){A(e.$$.fragment,l),t=L(l),A(i.$$.fragment,l)},m(l,g){V(e,l,g),I(l,t,g),V(i,l,g),o=!0},p(l,g){var m,u;const S={};!n&&g&8&&(n=!0,S.collider=l[3],ge(()=>n=!1)),e.$set(S);const h={};g&2&&(h.geometry=(m=l[1])!=null?m:new bt(.3,.3,.24)),g&4&&(h.material=(u=l[2])!=null?u:new _e),i.$set(h)},i(l){o||(w(e.$$.fragment,l),w(i.$$.fragment,l),o=!0)},o(l){b(e.$$.fragment,l),b(i.$$.fragment,l),o=!1},d(l){D(e,l),l&&R(t),D(i,l)}}}function Xn(r){let e,n,t,i,o;function f(s){r[17](s)}let c={canSleep:!1,position:r[0],$$slots:{default:[Qn]},$$scope:{ctx:r}};return r[4]!==void 0&&(c.rigidBody=r[4]),e=new Ve({props:c}),x.push(()=>de(e,"rigidBody",f)),{c(){B(e.$$.fragment)},l(s){A(e.$$.fragment,s)},m(s,a){V(e,s,a),t=!0,i||(o=[_t(window,"keydown",r[8]),_t(window,"keyup",r[9])],i=!0)},p(s,[a]){const l={};a&1&&(l.position=s[0]),a&524302&&(l.$$scope={dirty:a,ctx:s}),!n&&a&16&&(n=!0,l.rigidBody=s[4],ge(()=>n=!1)),e.$set(l)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){D(e,s),i=!1,Rt(o)}}}function Yn(r,e,n){let t,i,o,{position:f=void 0}=e,{parentRigidBody:c=void 0}=e,{anchor:s}=e,a,{isDriven:l=!1}=e,{geometry:g}=e,{material:S}=e;const h=jt();F(r,h,_=>n(15,i=_));let m=!1;const{rigidBodyA:u,rigidBodyB:p,joint:E}=Mt(s,{},{z:1});F(r,p,_=>n(4,o=_)),F(r,E,_=>n(14,t=_));const z=_=>{_.key===" "&&(_.preventDefault(),n(13,m=!0))},O=_=>{_.key===" "&&(_.preventDefault(),n(13,m=!1))};function M(_){a=_,n(3,a)}function j(_){o=_,p.set(o)}return r.$$set=_=>{"position"in _&&n(0,f=_.position),"parentRigidBody"in _&&n(10,c=_.parentRigidBody),"anchor"in _&&n(11,s=_.anchor),"isDriven"in _&&n(12,l=_.isDriven),"geometry"in _&&n(1,g=_.geometry),"material"in _&&n(2,S=_.material)},r.$$.update=()=>{r.$$.dirty&1024&&c&&u.set(c),r.$$.dirty&16384&&(t==null||t.configureMotorModel(qe.AccelerationBased)),r.$$.dirty&28672&&(t==null||t.configureMotorModel(l&&m?qe.ForceBased:qe.AccelerationBased)),r.$$.dirty&61440&&l&&(t==null||t.configureMotorVelocity(m?0:i.y*1e3,10)),r.$$.dirty&16384&&(t==null||t.setContactsEnabled(!1))},[f,g,S,a,o,h,p,E,z,O,c,s,l,m,t,i,M,j]}class $n extends le{constructor(e){super(),fe(this,e,Yn,Xn,ee,{position:0,parentRigidBody:10,anchor:11,isDriven:12,geometry:1,material:2})}}function xn(r){let e,n;return e=new tt({props:{mass:1,shape:"cuboid",args:[.03,.03,.03]}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p:ie,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ei(r){let e,n,t,i,o;function f(s){r[17](s)}let c={$$slots:{default:[xn]},$$scope:{ctx:r}};return r[5]!==void 0&&(c.rigidBody=r[5]),e=new Ve({props:c}),x.push(()=>de(e,"rigidBody",f)),i=new $n({props:{isDriven:r[1],geometry:r[3],material:r[4],anchor:{z:r[2]==="left"?.2:-.2},position:{z:r[2]==="left"?.2:-.2},parentRigidBody:r[5]}}),{c(){B(e.$$.fragment),t=P(),B(i.$$.fragment)},l(s){A(e.$$.fragment,s),t=L(s),A(i.$$.fragment,s)},m(s,a){V(e,s,a),I(s,t,a),V(i,s,a),o=!0},p(s,a){const l={};a&1048576&&(l.$$scope={dirty:a,ctx:s}),!n&&a&32&&(n=!0,l.rigidBody=s[5],ge(()=>n=!1)),e.$set(l);const g={};a&2&&(g.isDriven=s[1]),a&8&&(g.geometry=s[3]),a&16&&(g.material=s[4]),a&4&&(g.anchor={z:s[2]==="left"?.2:-.2}),a&4&&(g.position={z:s[2]==="left"?.2:-.2}),a&32&&(g.parentRigidBody=s[5]),i.$set(g)},i(s){o||(w(e.$$.fragment,s),w(i.$$.fragment,s),o=!0)},o(s){b(e.$$.fragment,s),b(i.$$.fragment,s),o=!1},d(s){D(e,s),s&&R(t),D(i,s)}}}function ti(r){let e,n;return e=new $e({props:{position:r[0],$$slots:{default:[ei]},$$scope:{ctx:r}}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p(t,[i]){const o={};i&1&&(o.position=t[0]),i&1048638&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ni(r,e,n){let t,i,o,f,{position:c=void 0}=e,{parentRigidBody:s=void 0}=e,{anchor:a}=e,{isSteered:l=!1}=e,{isDriven:g=!1}=e,{side:S}=e,{geometry:h}=e,{material:m}=e,u;const p=jt();F(r,p,y=>n(15,o=y));const{speed:E}=li();F(r,E,y=>n(16,f=y));const z=Sn(Bt(kt(f/12,0,1),0,1,1,.5)*o.x*15);F(r,z,y=>n(13,t=y));const{joint:O,rigidBodyA:M,rigidBodyB:j}=l?Mt(a,{},{y:1}):Un(a,{},{},{});F(r,O,y=>n(14,i=y));function _(y){u=y,n(5,u)}return r.$$set=y=>{"position"in y&&n(0,c=y.position),"parentRigidBody"in y&&n(10,s=y.parentRigidBody),"anchor"in y&&n(11,a=y.anchor),"isSteered"in y&&n(12,l=y.isSteered),"isDriven"in y&&n(1,g=y.isDriven),"side"in y&&n(2,S=y.side),"geometry"in y&&n(3,h=y.geometry),"material"in y&&n(4,m=y.material)},r.$$.update=()=>{r.$$.dirty&98304&&z.set(Bt(kt(f/12,0,1),0,1,1,.5)*o.x*15),r.$$.dirty&1024&&s&&M.set(s),r.$$.dirty&32&&u&&j.set(u),r.$$.dirty&16384&&(i==null||i.setContactsEnabled(!1)),r.$$.dirty&28672&&l&&(i==null||i.configureMotorPosition(t*-1*ye,1e6,0))},[c,g,S,h,m,u,p,E,z,O,s,a,l,t,i,o,f,_]}class He extends le{constructor(e){super(),fe(this,e,ni,ti,ee,{position:0,parentRigidBody:10,anchor:11,isSteered:12,isDriven:1,side:2,geometry:3,material:4})}}function ii(r){let e,n=(r[4]*3.6).toFixed(0)+"",t,i;return{c(){e=Q("p"),t=me(n),i=me(" km/h"),this.h()},l(o){e=X(o,"P",{class:!0});var f=ne(e);t=ce(f,n),i=ce(f," km/h"),f.forEach(R),this.h()},h(){ae(e,"class","text-xs text-black")},m(o,f){I(o,e,f),Z(e,t),Z(e,i)},p(o,f){f&16&&n!==(n=(o[4]*3.6).toFixed(0)+"")&&sn(t,n)},d(o){o&&R(e)}}}function ri(r){var l,g,S,h;let e,n,t,i,o,f,c;e=new tt({props:{mass:1,shape:"cuboid",args:[1.25,.4,.5]}}),t=new Ce({props:{castShadow:!0,geometry:(g=(l=r[3])==null?void 0:l.geometry)!=null?g:new Re(2.5,.8,1),material:(h=(S=r[3])==null?void 0:S.material)!=null?h:new _e}});const s=r[15].default,a=ve(s,r,r[17],null);return f=new Oe({props:{rotation:{y:90*ye},transform:!0,position:{x:3},$$slots:{default:[ii]},$$scope:{ctx:r}}}),{c(){B(e.$$.fragment),n=P(),B(t.$$.fragment),i=P(),a&&a.c(),o=P(),B(f.$$.fragment)},l(m){A(e.$$.fragment,m),n=L(m),A(t.$$.fragment,m),i=L(m),a&&a.l(m),o=L(m),A(f.$$.fragment,m)},m(m,u){V(e,m,u),I(m,n,u),V(t,m,u),I(m,i,u),a&&a.m(m,u),I(m,o,u),V(f,m,u),c=!0},p(m,u){var z,O,M,j;const p={};u&8&&(p.geometry=(O=(z=m[3])==null?void 0:z.geometry)!=null?O:new Re(2.5,.8,1)),u&8&&(p.material=(j=(M=m[3])==null?void 0:M.material)!=null?j:new _e),t.$set(p),a&&a.p&&(!c||u&131072)&&Se(a,s,m,m[17],c?Be(s,m[17],u,null):ke(m[17]),null);const E={};u&131088&&(E.$$scope={dirty:u,ctx:m}),f.$set(E)},i(m){c||(w(e.$$.fragment,m),w(t.$$.fragment,m),w(a,m),w(f.$$.fragment,m),c=!0)},o(m){b(e.$$.fragment,m),b(t.$$.fragment,m),b(a,m),b(f.$$.fragment,m),c=!1},d(m){D(e,m),m&&R(n),D(t,m),m&&R(i),a&&a.d(m),m&&R(o),D(f,m)}}}function oi(r){var m,u,p,E,z,O,M,j;let e,n,t,i,o,f,c,s,a,l,g;function S(_){r[16](_)}let h={canSleep:!1,$$slots:{default:[ri]},$$scope:{ctx:r}};return r[2]!==void 0&&(h.rigidBody=r[2]),e=new Ve({props:h}),x.push(()=>de(e,"rigidBody",S)),i=new He({props:{geometry:(m=r[5])==null?void 0:m.geometry,material:(u=r[5])==null?void 0:u.material,side:"left",isSteered:!0,parentRigidBody:r[2],position:{x:-1.2,z:.8,y:-.4},anchor:{x:-1.2,z:.8,y:-.4}}}),f=new He({props:{geometry:(p=r[6])==null?void 0:p.geometry,material:(E=r[6])==null?void 0:E.material,side:"right",isSteered:!0,parentRigidBody:r[2],position:{x:-1.2,z:-.8,y:-.4},anchor:{x:-1.2,z:-.8,y:-.4}}}),s=new He({props:{geometry:(z=r[7])==null?void 0:z.geometry,material:(O=r[7])==null?void 0:O.material,isDriven:!0,side:"left",parentRigidBody:r[2],position:{x:1.2,z:.8,y:-.4},anchor:{x:1.2,z:.8,y:-.4}}}),l=new He({props:{geometry:(M=r[8])==null?void 0:M.geometry,material:(j=r[8])==null?void 0:j.material,isDriven:!0,side:"right",parentRigidBody:r[2],position:{x:1.2,z:-.8,y:-.4},anchor:{x:1.2,z:-.8,y:-.4}}}),{c(){B(e.$$.fragment),t=P(),B(i.$$.fragment),o=P(),B(f.$$.fragment),c=P(),B(s.$$.fragment),a=P(),B(l.$$.fragment)},l(_){A(e.$$.fragment,_),t=L(_),A(i.$$.fragment,_),o=L(_),A(f.$$.fragment,_),c=L(_),A(s.$$.fragment,_),a=L(_),A(l.$$.fragment,_)},m(_,y){V(e,_,y),I(_,t,y),V(i,_,y),I(_,o,y),V(f,_,y),I(_,c,y),V(s,_,y),I(_,a,y),V(l,_,y),g=!0},p(_,y){var q,Y,v,re,Ae,W,pe,we;const T={};y&131096&&(T.$$scope={dirty:y,ctx:_}),!n&&y&4&&(n=!0,T.rigidBody=_[2],ge(()=>n=!1)),e.$set(T);const N={};y&32&&(N.geometry=(q=_[5])==null?void 0:q.geometry),y&32&&(N.material=(Y=_[5])==null?void 0:Y.material),y&4&&(N.parentRigidBody=_[2]),i.$set(N);const K={};y&64&&(K.geometry=(v=_[6])==null?void 0:v.geometry),y&64&&(K.material=(re=_[6])==null?void 0:re.material),y&4&&(K.parentRigidBody=_[2]),f.$set(K);const C={};y&128&&(C.geometry=(Ae=_[7])==null?void 0:Ae.geometry),y&128&&(C.material=(W=_[7])==null?void 0:W.material),y&4&&(C.parentRigidBody=_[2]),s.$set(C);const U={};y&256&&(U.geometry=(pe=_[8])==null?void 0:pe.geometry),y&256&&(U.material=(we=_[8])==null?void 0:we.material),y&4&&(U.parentRigidBody=_[2]),l.$set(U)},i(_){g||(w(e.$$.fragment,_),w(i.$$.fragment,_),w(f.$$.fragment,_),w(s.$$.fragment,_),w(l.$$.fragment,_),g=!0)},o(_){b(e.$$.fragment,_),b(i.$$.fragment,_),b(f.$$.fragment,_),b(s.$$.fragment,_),b(l.$$.fragment,_),g=!1},d(_){D(e,_),_&&R(t),D(i,_),_&&R(o),D(f,_),_&&R(c),D(s,_),_&&R(a),D(l,_)}}}function si(r){let e,n;return e=new $e({props:{position:r[0],rotation:r[1],$$slots:{default:[oi]},$$scope:{ctx:r}}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p(t,[i]){const o={};i&1&&(o.position=t[0]),i&2&&(o.rotation=t[1]),i&131580&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}const li=()=>on("threlte-car-context");function fi(r,e,n){let t,i,o,f,c,s,{$$slots:a={},$$scope:l}=e,{position:g=void 0}=e,{rotation:S=void 0}=e,h;const m={speed:te(0)},{speed:u}=m;F(r,u,C=>n(4,i=C)),rn("threlte-car-context",m);const{world:p}=et(),E=new kn,z=["car006","car006_w001","car006_w002","car006_w003","car006_w004"],{gltf:O}=Et(`${It}/models/city/glb/car-6.glb`),[M,j,_,y,T]=z.map(C=>oe(O,U=>{if(!(!U||!U.nodes[C]))return U.nodes[C]}));F(r,M,C=>n(3,t=C)),F(r,j,C=>n(5,o=C)),F(r,_,C=>n(6,f=C)),F(r,y,C=>n(7,c=C)),F(r,T,C=>n(8,s=C)),xe(()=>{const C=h.linvel();E.set(C.x,C.y,C.z),m.speed.set(E.length())});const N={maxStabilizationIterations:p.maxStabilizationIterations,maxVelocityFrictionIterations:p.maxVelocityFrictionIterations,maxVelocityIterations:p.maxVelocityIterations};p.maxStabilizationIterations*=100,p.maxVelocityFrictionIterations*=100,p.maxVelocityIterations*=100,Ne(()=>{p.maxStabilizationIterations=N.maxStabilizationIterations,p.maxVelocityFrictionIterations=N.maxVelocityFrictionIterations,p.maxVelocityIterations=N.maxVelocityIterations});function K(C){h=C,n(2,h)}return r.$$set=C=>{"position"in C&&n(0,g=C.position),"rotation"in C&&n(1,S=C.rotation),"$$scope"in C&&n(17,l=C.$$scope)},[g,S,h,t,i,o,f,c,s,u,M,j,_,y,T,a,K,l]}class ai extends le{constructor(e){super(),fe(this,e,fi,si,ee,{position:0,rotation:1})}}function ui(r){let e,n;return e=new Ce({props:{receiveShadow:!0,geometry:new Re(150,1,150),material:new _e}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p:ie,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function mi(r){let e,n,t,i;return e=new Ye({props:{object:new Bn(150,15),position:{y:.001}}}),t=new je({props:{shape:"cuboid",position:{y:-.5},$$slots:{default:[ui]},$$scope:{ctx:r}}}),{c(){B(e.$$.fragment),n=P(),B(t.$$.fragment)},l(o){A(e.$$.fragment,o),n=L(o),A(t.$$.fragment,o)},m(o,f){V(e,o,f),I(o,n,f),V(t,o,f),i=!0},p(o,[f]){const c={};f&1&&(c.$$scope={dirty:f,ctx:o}),t.$set(c)},i(o){i||(w(e.$$.fragment,o),w(t.$$.fragment,o),i=!0)},o(o){b(e.$$.fragment,o),b(t.$$.fragment,o),i=!1},d(o){D(e,o),o&&R(n),D(t,o)}}}class ci extends le{constructor(e){super(),fe(this,e,null,mi,ee,{})}}function di(r){let e,n;return{c(){e=Q("p"),n=me("Dominance: 1")},l(t){e=X(t,"P",{});var i=ne(e);n=ce(i,"Dominance: 1"),i.forEach(R)},m(t,i){I(t,e,i),Z(e,n)},p:ie,d(t){t&&R(e)}}}function gi(r){let e,n;return e=new Ce({props:{geometry:new Re(1,1,1),material:new _e}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p:ie,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function _i(r){let e,n,t,i;return e=new Oe({props:{transform:!0,sprite:!0,pointerEvents:"none",position:{y:1},$$slots:{default:[di]},$$scope:{ctx:r}}}),t=new je({props:{shape:"cuboid",$$slots:{default:[gi]},$$scope:{ctx:r}}}),{c(){B(e.$$.fragment),n=P(),B(t.$$.fragment)},l(o){A(e.$$.fragment,o),n=L(o),A(t.$$.fragment,o)},m(o,f){V(e,o,f),I(o,n,f),V(t,o,f),i=!0},p(o,f){const c={};f&4&&(c.$$scope={dirty:f,ctx:o}),e.$set(c);const s={};f&4&&(s.$$scope={dirty:f,ctx:o}),t.$set(s)},i(o){i||(w(e.$$.fragment,o),w(t.$$.fragment,o),i=!0)},o(o){b(e.$$.fragment,o),b(t.$$.fragment,o),i=!1},d(o){D(e,o),o&&R(n),D(t,o)}}}function pi(r){let e,n;return{c(){e=Q("p"),n=me("Dominance: -1")},l(t){e=X(t,"P",{});var i=ne(e);n=ce(i,"Dominance: -1"),i.forEach(R)},m(t,i){I(t,e,i),Z(e,n)},p:ie,d(t){t&&R(e)}}}function wi(r){let e,n;return e=new Ce({props:{geometry:new Re(3,3,3),material:new _e}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p:ie,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function hi(r){let e,n,t,i;return e=new Oe({props:{transform:!0,sprite:!0,pointerEvents:"none",position:{y:3},$$slots:{default:[pi]},$$scope:{ctx:r}}}),t=new je({props:{shape:"cuboid",$$slots:{default:[wi]},$$scope:{ctx:r}}}),{c(){B(e.$$.fragment),n=P(),B(t.$$.fragment)},l(o){A(e.$$.fragment,o),n=L(o),A(t.$$.fragment,o)},m(o,f){V(e,o,f),I(o,n,f),V(t,o,f),i=!0},p(o,f){const c={};f&4&&(c.$$scope={dirty:f,ctx:o}),e.$set(c);const s={};f&4&&(s.$$scope={dirty:f,ctx:o}),t.$set(s)},i(o){i||(w(e.$$.fragment,o),w(t.$$.fragment,o),i=!0)},o(o){b(e.$$.fragment,o),b(t.$$.fragment,o),i=!1},d(o){D(e,o),o&&R(n),D(t,o)}}}function bi(r){let e,n;return{c(){e=Q("p"),n=me("Dominance: 0")},l(t){e=X(t,"P",{});var i=ne(e);n=ce(i,"Dominance: 0"),i.forEach(R)},m(t,i){I(t,e,i),Z(e,n)},p:ie,d(t){t&&R(e)}}}function yi(r){let e,n;return e=new Ce({props:{geometry:new Re(2,2,2),material:new _e}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p:ie,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function vi(r){let e,n,t,i;return e=new Oe({props:{transform:!0,sprite:!0,pointerEvents:"none",position:{y:2},$$slots:{default:[bi]},$$scope:{ctx:r}}}),t=new je({props:{shape:"cuboid",$$slots:{default:[yi]},$$scope:{ctx:r}}}),{c(){B(e.$$.fragment),n=P(),B(t.$$.fragment)},l(o){A(e.$$.fragment,o),n=L(o),A(t.$$.fragment,o)},m(o,f){V(e,o,f),I(o,n,f),V(t,o,f),i=!0},p(o,f){const c={};f&4&&(c.$$scope={dirty:f,ctx:o}),e.$set(c);const s={};f&4&&(s.$$scope={dirty:f,ctx:o}),t.$set(s)},i(o){i||(w(e.$$.fragment,o),w(t.$$.fragment,o),i=!0)},o(o){b(e.$$.fragment,o),b(t.$$.fragment,o),i=!1},d(o){D(e,o),o&&R(n),D(t,o)}}}function At(r){let e,n;return e=new je({props:{shape:"trimesh",$$slots:{default:[Si]},$$scope:{ctx:r}}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p(t,i){const o={};i&5&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Si(r){let e,n;return e=new Ye({props:{rotation:{y:90*ye},object:r[0].scene,position:{y:-.3,x:-50,z:-3}}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p(t,i){const o={};i&1&&(o.object=t[0].scene),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ki(r){let e,n;return e=new Vn({props:{rotation:{x:-90*ye,z:90*ye,y:70*ye},position:{y:5,x:10},fov:60}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p:ie,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Bi(r){let e,n,t,i,o,f,c,s,a,l,g,S,h;e=new An({props:{position:{y:20,x:8,z:-3}}}),t=new ci({}),o=new Ve({props:{dominance:1,position:{y:3,x:-10,z:-12},$$slots:{default:[_i]},$$scope:{ctx:r}}}),c=new Ve({props:{dominance:-1,position:{y:3,x:-15,z:-14},$$slots:{default:[hi]},$$scope:{ctx:r}}}),a=new Ve({props:{dominance:0,position:{y:3,x:-13,z:-10},$$slots:{default:[vi]},$$scope:{ctx:r}}});let m=r[0]&&At(r);return S=new ai({props:{position:{y:5,x:70},$$slots:{default:[ki]},$$scope:{ctx:r}}}),{c(){B(e.$$.fragment),n=P(),B(t.$$.fragment),i=P(),B(o.$$.fragment),f=P(),B(c.$$.fragment),s=P(),B(a.$$.fragment),l=P(),m&&m.c(),g=P(),B(S.$$.fragment)},l(u){A(e.$$.fragment,u),n=L(u),A(t.$$.fragment,u),i=L(u),A(o.$$.fragment,u),f=L(u),A(c.$$.fragment,u),s=L(u),A(a.$$.fragment,u),l=L(u),m&&m.l(u),g=L(u),A(S.$$.fragment,u)},m(u,p){V(e,u,p),I(u,n,p),V(t,u,p),I(u,i,p),V(o,u,p),I(u,f,p),V(c,u,p),I(u,s,p),V(a,u,p),I(u,l,p),m&&m.m(u,p),I(u,g,p),V(S,u,p),h=!0},p(u,[p]){const E={};p&4&&(E.$$scope={dirty:p,ctx:u}),o.$set(E);const z={};p&4&&(z.$$scope={dirty:p,ctx:u}),c.$set(z);const O={};p&4&&(O.$$scope={dirty:p,ctx:u}),a.$set(O),u[0]?m?(m.p(u,p),p&1&&w(m,1)):(m=At(u),m.c(),w(m,1),m.m(g.parentNode,g)):m&&(ze(),b(m,1,1,()=>{m=null}),Me());const M={};p&4&&(M.$$scope={dirty:p,ctx:u}),S.$set(M)},i(u){h||(w(e.$$.fragment,u),w(t.$$.fragment,u),w(o.$$.fragment,u),w(c.$$.fragment,u),w(a.$$.fragment,u),w(m),w(S.$$.fragment,u),h=!0)},o(u){b(e.$$.fragment,u),b(t.$$.fragment,u),b(o.$$.fragment,u),b(c.$$.fragment,u),b(a.$$.fragment,u),b(m),b(S.$$.fragment,u),h=!1},d(u){D(e,u),u&&R(n),D(t,u),u&&R(i),D(o,u),u&&R(f),D(c,u),u&&R(s),D(a,u),u&&R(l),m&&m.d(u),u&&R(g),D(S,u)}}}function Ai(r,e,n){let t;const{gltf:i}=Et(`${It}/models/loop/loop.glb`);return F(r,i,o=>n(0,t=o)),[t,i]}class Vi extends le{constructor(e){super(),fe(this,e,Ai,Bi,ee,{})}}function Vt(r){let e,n;return e=new Zn({props:{depthTest:!1,depthWrite:!1}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Di(r){let e,n,t,i=r[0]&&Vt();return n=new Vi({}),{c(){i&&i.c(),e=P(),B(n.$$.fragment)},l(o){i&&i.l(o),e=L(o),A(n.$$.fragment,o)},m(o,f){i&&i.m(o,f),I(o,e,f),V(n,o,f),t=!0},p(o,f){o[0]?i?f&1&&w(i,1):(i=Vt(),i.c(),w(i,1),i.m(e.parentNode,e)):i&&(ze(),b(i,1,1,()=>{i=null}),Me())},i(o){t||(w(i),w(n.$$.fragment,o),t=!0)},o(o){b(i),b(n.$$.fragment,o),t=!1},d(o){i&&i.d(o),o&&R(e),D(n,o)}}}function Ri(r){let e,n,t,i,o,f;return{c(){e=Q("p"),n=me("It seems your browser"),t=Q("br"),i=me(`
					doesn't support WASM.`),o=Q("br"),f=me(`
					I'm sorry.`),this.h()},l(c){e=X(c,"P",{class:!0});var s=ne(e);n=ce(s,"It seems your browser"),t=X(s,"BR",{}),i=ce(s,`
					doesn't support WASM.`),o=X(s,"BR",{}),f=ce(s,`
					I'm sorry.`),s.forEach(R),this.h()},h(){ae(e,"class","text-xs")},m(c,s){I(c,e,s),Z(e,n),Z(e,t),Z(e,i),Z(e,o),Z(e,f)},p:ie,d(c){c&&R(e)}}}function Ci(r){let e,n;return e=new Oe({props:{slot:"fallback",transform:!0,$$slots:{default:[Ri]},$$scope:{ctx:r}}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p(t,i){const o={};i&8&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ei(r){let e,n;return e=new Rn({props:{$$slots:{fallback:[Ci],default:[Di]},$$scope:{ctx:r}}}),{c(){B(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p(t,i){const o={};i&9&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ii(r){let e,n,t,i,o,f;n=new Dn({props:{$$slots:{default:[Ei]},$$scope:{ctx:r}}});const c=r[2].default,s=ve(c,r,r[3],null);return o=new Cn({props:{input:r[1]}}),{c(){e=Q("div"),B(n.$$.fragment),t=P(),s&&s.c(),i=P(),B(o.$$.fragment),this.h()},l(a){e=X(a,"DIV",{class:!0});var l=ne(e);A(n.$$.fragment,l),l.forEach(R),t=L(a),s&&s.l(a),i=L(a),A(o.$$.fragment,a),this.h()},h(){ae(e,"class","wrapper svelte-12o3lt9")},m(a,l){I(a,e,l),V(n,e,null),I(a,t,l),s&&s.m(a,l),I(a,i,l),V(o,a,l),f=!0},p(a,[l]){const g={};l&9&&(g.$$scope={dirty:l,ctx:a}),n.$set(g),s&&s.p&&(!f||l&8)&&Se(s,c,a,a[3],f?Be(c,a[3],l,null):ke(a[3]),null);const S={};l&2&&(S.input=a[1]),o.$set(S)},i(a){f||(w(n.$$.fragment,a),w(s,a),w(o.$$.fragment,a),f=!0)},o(a){b(n.$$.fragment,a),b(s,a),b(o.$$.fragment,a),f=!1},d(a){a&&R(e),D(n),a&&R(t),s&&s.d(a),a&&R(i),D(o,a)}}}function zi(r,e,n){let{$$slots:t={},$$scope:i}=e,{controls:o=!1}=e,{input:f}=e;return r.$$set=c=>{"controls"in c&&n(0,o=c.controls),"input"in c&&n(1,f=c.input),"$$scope"in c&&n(3,i=c.$$scope)},[o,f,t,i]}class Li extends le{constructor(e){super(),fe(this,e,zi,Ii,ee,{controls:0,input:1})}}export{Li as W};
